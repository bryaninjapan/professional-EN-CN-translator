# 管理员页面更新说明

## 更新内容

已将新的激活码管理和 Gumroad 订单管理功能合并到现有的 `/admin` 页面中。

## 页面结构

现在 `/admin` 页面包含 4 个标签页：

1. **激活码管理（服务器）** - 原有的服务器端激活码管理
   - 需要登录验证
   - 使用服务器端 API
   - 管理数据库中的激活码

2. **数据统计** - 原有的统计功能
   - 需要登录验证
   - 显示使用统计、激活码统计等

3. **本地激活码（localStorage）** - 新增功能
   - **需要登录验证**
   - 使用浏览器 localStorage 存储
   - 生成和管理本地激活码
   - 与服务器端系统独立

4. **Gumroad 订单** - 新增功能
   - **需要登录验证**
   - 使用浏览器 localStorage 存储
   - 手动创建 Gumroad 订单
   - 生成激活码并关联到订单
   - 订单状态管理

## 重要说明

### 两个激活码系统

现在有两个独立的激活码管理系统：

1. **服务器端系统**（标签页 1）
   - 数据存储在 Cloudflare D1 数据库
   - 需要登录验证
   - 通过 API 管理
   - 适合生产环境

2. **本地系统**（标签页 3）
   - 数据存储在浏览器 localStorage
   - 不需要登录
   - 纯前端管理
   - 适合快速测试和 Gumroad 销售

### 使用建议

- **Gumroad 销售流程**：使用"Gumroad 订单"标签页
  1. 创建订单
  2. 生成激活码（自动关联）
  3. 发送给客户

- **批量管理**：使用"本地激活码"标签页
  - 快速生成多个激活码
  - 查看使用情况

- **生产环境**：使用"激活码管理（服务器）"标签页
  - 数据持久化
  - 需要登录保护

## 已删除的文件

- `/app/admin-license/page.tsx` - 功能已合并到 `/admin` 页面

## 访问方式

- 统一访问：`/admin`
- **所有功能都需要登录验证**（已实施方案3）
- 登录后可以使用所有 4 个标签页的功能
- 未登录时只能看到登录页面
- 登录状态通过 token 保存在 localStorage，刷新页面后保持登录

## 安全说明

- 所有管理功能（包括本地功能）都需要管理员密码验证
- 登录 token 存储在浏览器 localStorage
- 建议定期更换管理员密码
- 本地数据（激活码、订单）存储在浏览器，清除浏览器数据会丢失

