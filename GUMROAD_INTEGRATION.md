# Gumroad 收款集成使用说明

## 概述

本系统支持通过 Gumroad 收款，管理员手动创建订单并发送激活码给客户。这是一个简化的流程，适合小规模销售。

## 工作流程

### 1. 客户在 Gumroad 购买
- 客户在 Gumroad 上购买产品
- Gumroad 发送订单确认邮件给客户
- 您会收到 Gumroad 的销售通知邮件

### 2. 管理员创建订单
1. 访问 `/admin-license` 页面
2. 点击"订单管理"标签页
3. 点击"创建订单"按钮
4. 填写订单信息：
   - **Gumroad 订单号**（必填）：从 Gumroad 邮件或后台获取
   - **客户邮箱**（必填）：客户的邮箱地址
   - **客户姓名**（可选）：客户姓名
   - **产品名称**：默认为 "EN Translator License (100 uses)"
   - **金额**：订单金额
   - **货币**：USD/CNY/EUR/JPY
   - **购买日期**：订单日期
   - **备注**（可选）：额外信息
5. 点击"创建订单"

### 3. 生成并发送激活码
1. 在订单列表中找到待处理的订单（状态为"待处理"）
2. 点击"生成激活码"按钮
3. 系统会自动：
   - 生成新的激活码（格式：ENTL-XXXX-XXXX-XXXX）
   - 将激活码复制到剪贴板
   - 关联激活码到订单
   - 将订单状态更新为"已完成"
4. 发送激活码给客户：
   - 复制激活码（已自动复制）
   - 通过邮件发送给客户（使用客户邮箱）
   - 或通过 Gumroad 的消息功能发送

## 订单状态说明

- **待处理 (pending)**：订单已创建，等待生成激活码
- **处理中 (processing)**：正在处理订单（暂未使用）
- **已完成 (completed)**：激活码已生成并发送
- **已取消 (cancelled)**：订单已取消

## 功能特性

### 订单管理
- ✅ 创建订单（手动输入 Gumroad 订单信息）
- ✅ 查看所有订单列表
- ✅ 按状态筛选订单（全部/待处理/已完成等）
- ✅ 订单统计（总订单数、待处理数、已完成数、总金额）
- ✅ 删除订单

### 激活码生成
- ✅ 一键生成激活码并关联到订单
- ✅ 自动复制激活码到剪贴板
- ✅ 显示客户邮箱，方便发送激活码
- ✅ 订单完成后显示激活码

### 数据存储
- 所有订单数据存储在浏览器 localStorage
- 订单与激活码自动关联
- 支持导出数据（通过浏览器开发者工具）

## 使用示例

### 示例 1：处理新订单

1. **收到 Gumroad 销售通知**
   ```
   订单号：12345678
   客户：john@example.com
   金额：$9.99
   产品：EN Translator License
   ```

2. **创建订单**
   - 访问 `/admin-license` → "订单管理"
   - 点击"创建订单"
   - 填写信息：
     - Gumroad 订单号：`12345678`
     - 客户邮箱：`john@example.com`
     - 金额：`9.99`
     - 货币：`USD`
   - 点击"创建订单"

3. **生成激活码**
   - 在订单列表中找到该订单
   - 点击"生成激活码"
   - 系统提示：`激活码已生成并复制到剪贴板：ENTL-A3B9-C7D2-E1F4`
   - 复制激活码发送给客户

4. **发送给客户**
   ```
   主题：您的 EN Translator 激活码
   
   感谢您的购买！
   
   您的激活码：ENTL-A3B9-C7D2-E1F4
   
   使用方法：
   1. 访问 https://en-translator.pages.dev
   2. 点击右上角"激活码"按钮
   3. 输入激活码并激活
   4. 开始使用翻译功能（100次使用）
   
   如有问题，请随时联系。
   ```

## 订单筛选

在订单管理页面，您可以按以下状态筛选订单：
- **全部**：显示所有订单
- **待处理**：需要生成激活码的订单
- **处理中**：正在处理的订单
- **已完成**：已发送激活码的订单
- **已取消**：已取消的订单

## 订单统计

页面顶部显示以下统计信息：
- **总订单数**：所有订单的数量
- **待处理**：需要处理的订单数量（红色标记）
- **已完成**：已完成的订单数量
- **总金额**：所有订单的总金额

## 注意事项

1. **订单号唯一性**：每个 Gumroad 订单号只能创建一次订单
2. **激活码自动关联**：生成激活码后会自动关联到订单，无法修改
3. **数据存储**：订单数据存储在浏览器 localStorage，清除数据会丢失
4. **备份建议**：定期导出订单数据（通过浏览器开发者工具）

## 未来改进

- [ ] Gumroad Webhook 自动创建订单
- [ ] 邮件自动发送激活码
- [ ] 订单批量导入
- [ ] 订单导出功能（CSV/Excel）
- [ ] 客户历史记录查看

## 常见问题

### Q: 如何找到 Gumroad 订单号？
A: 在 Gumroad 的销售通知邮件中，或在 Gumroad 后台的"Sales"页面查看。

### Q: 可以修改已创建的订单吗？
A: 目前不支持修改订单，如需修改请删除后重新创建。

### Q: 激活码可以重复使用吗？
A: 不可以，每个激活码只能激活一次。

### Q: 如何备份订单数据？
A: 打开浏览器开发者工具（F12）→ Application → Local Storage → 复制 `en_translator_gumroad_orders` 的值。

### Q: 订单数据会丢失吗？
A: 数据存储在浏览器 localStorage，清除浏览器数据会丢失。建议定期备份。

